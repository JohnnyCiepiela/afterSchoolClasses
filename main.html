<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, inital-scale=1.0">
    <script src="https://unpkg.com/vue@2.7.8/dist/vue.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">

    <title>After School Club</title>
</head>

<body>

    <div id="app">
        <header> <h1>After School Club</h1> </header>

        <button @click="toggleShowProduct">
            {{totalItemsInTheCart}}
            <span class="fas fa-shopping-cart"></span>
            Checkout
        </button>

        <div v-if="showProduct">

            <main>
                <figure>
                    <img v-bind:src="product.image" width="100px" height="=100px"> 
                </figure>
    
                <h1 v-text="product.title"></h1>
                <p><b>Location:</b> {{ product.location }}</p>
                <p><b>Description:</b> {{ product.description }}</p>
                <p><b>Price:</b> {{product.price}}</p>
                <p><b>Spaces:</b></p> 
                
                <span v-if="product.availableSpaces - totalItemsInTheCart > 0">
                    {{product.availableSpaces - totalItemsInTheCart}} spaces left</span>
                <span v-else-if="product.availableSpaces - totalItemsInTheCart === 0">All out!</span>
    
                <button v-on:click="addItemToCart" v-bind:disabled="!canAddToCart">Add to the Cart</button>
    
    
            </main>

        </div>

        <div v-else>
            <h2>Welcome to the checkout page! </h2>


         </div>

    </div>

    <script>
        let webstore = new Vue({
            el: "#app",
            data: { 
                    sitename: "After School Club",
                    showProduct: true,
                    product: {
                        id: 1001,
                        title: "Math",
                        location: "London",
                        description: "Fundamentals of math",
                        price: 100,
                        image: "math_icon.png",
                        availableSpaces:5
                        
                     },

                     cart: []
            },
            methods: {
                addItemToCart: function() {
                    this.cart.push(this.product.id);

                },
                toggleShowProduct() {
                    this.showProduct=this.showProduct ? false : true;

                }


            },
            computed: {
                totalItemsInTheCart: function() {
                    return this.cart.length || " ";

                },
                canAddToCart() {
                    return this.product.availableSpaces > this.totalItemsInTheCart;
                }

            }
        })

    </script>

</body>
</html>